# Linux知识学习

## Linux体系结构

![1566119979376](C:\Users\32183\AppData\Roaming\Typora\typora-user-images\1566119979376.png)

- 体系结构主要分为用**户态（用户上层活动）和内核态**

- **内核：本质是一段管理计算机硬件设备的程序**

  > *直接管理硬件，包括**CPU**,**硬盘接口**，**网络接口**等等。**所有的计算机操作都需要通过内核传递给硬件**。*
  >
  > *用户程序的执行必须依托于内核的资源，**包括CPU资源，存储资源，IO资源等**。*
  >
  > *为了访问这些资源，内核为其必须提供相应的接口，即**系统调用***

- 系统调用：内核的访问接口，是一种能再简化的操作

  > 一个操作系统上的功能，可以看作是操作系统上的系统调用的组合的结果。
  >
  > 一个操作系统不可能做出超越系统调用的操作，eg:给变量分配内存空间，就需要调用很多的系统调用。
  >
  > 由于一个系统的操作，比如分配变量内存需要调用需多系统调用指令，这无疑是给系统程序员增加了负担，因此产生了公共函数库，将程序员从复杂的系统调用细节种解脱出来，而提出的一种有效方法。

- 公共函数库：系统的调用的组合拳（实现对系统调用的封装，将简单的业务逻辑，及接口呈现给用户，方便用户调用，极大的增强了程序涉及的灵活性），对于简单的操作我们可以直接调用系统资源进行，对于复杂的操作我们可以使用公共库函数实现。根据不同的实现标准会产生，不同的标准库，ISOC标准库等。

- Shell:命令解释器，可编程。下通系统调用，上通各种应用。通常充当着一种胶水的角色。来连接各个小功能程序。让不同的程序能够以一个清晰的接口协调工作，从而增强各程序的功能。

  > 在没有图形界面之前Shell充当了用户的界面，当用户需要运行某些应用的时候，要通过Shell输入命令，已建立运行程序，同时Shell是可编程的，它可以执行符合Shell语法的文本。这样的文本称为Shell脚本。

通常简短的Shell命令，可以实现强大的功能，原因就是这些Shell语句通常对系统调用做了一层封装。

为了方便用户和系统交互，通常一个Shell对应一个系统终端，终端是一个硬件设备呈现个用户的是一个命令行的一个窗口，我们可以通过这个窗口输入或着输出这个文本，这个文本直接传递给Shell，进行分析解释执行。



### 系统调用

查看系统调用的指令：

```shell
man 2 syscalls
```

查看系统调用说明

```shell
man 2 acct
```

**`man 2`查询的是系统调用，`man 3`查询的是系统的库函数**





### Shell解析器

```shell
ls -lrt
```

使用`which ls`查看在默认文件下执行ls的文件路径 `/bin/ls` 



Shell解析器解析` ls -lrt`这个字符串解析首先在默认路径下去查找`ls`的文件，找到后Shell将参数`-lrt`传入到在``ls`文件中去执行。



- 查看当前Shell版本

```shell
echo $SHELL
```

- 查看可使用的Shell

```shell
cat /etc/shells
```

- 修改当前使用的Shell，任意切换到Shell上面

```shell
chsh -s +Shell路径
```