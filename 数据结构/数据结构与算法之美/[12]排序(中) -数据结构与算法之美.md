# [12]æ’åº(ä¸­) -æ•°æ®ç»“æ„ä¸ç®—æ³•ä¹‹ç¾:arrow_down_small:

| æ’åºç®—æ³• | æ—¶é—´å¤æ‚åº¦ |
| :------- | ---------- |
| å½’å¹¶     | O(nlogn)   |
| å¿«æ’     | O(nlogn)   |

**å¿«æ’ï¼Œå½’å¹¶æ’åº**ï¼šå¤§è§„æ¨¡çš„æ•°æ®æ’åºï¼Œæ¯”å†’æ³¡ï¼Œæ’å…¥ï¼Œé€‰æ‹©æ›´åŠ å¸¸ç”¨ã€‚---åˆ†æ²»æ€æƒ³

# å¸¦ç€é—®é¢˜:grey_question:

å¦‚ä½•åœ¨O(n)çš„æ—¶é—´å¤æ‚åº¦å†…æŸ¥æ‰¾ä¸€ä¸ªæ— åºæ•°ç»„ä¸­çš„ç¬¬Kå¤§å…ƒç´ ï¼Ÿ



## å½’å¹¶æ’åº(Merge Sort):dog2:

å½’å¹¶æ’åºæ ¸å¿ƒæ€æƒ³ï¼š

- å…ˆæŠŠæ•°ç»„ä»ä¸­é—´**åˆ†æˆå‰åä¸¤éƒ¨åˆ†**
- ç„¶åå¯¹å‰åä¸¤éƒ¨åˆ†ï¼Œ**åˆ†åˆ«æ’åº** 
- å†å°†æ’å¥½çš„ä¸¤ä¸ªéƒ¨åˆ†**åˆå¹¶**åœ¨ä¸€èµ·ã€‚

![å½’å¹¶æ’åºç®—æ³•å›¾](D:\å©•\æ•°æ®ç»“æ„ä¸ç®—æ³•ä¹‹ç¾\picture\å½’å¹¶æ’åºç®—æ³•å›¾.png)

åˆ©ç”¨çš„æ˜¯**åˆ†æ²»æ€æƒ³** ï¼Œå¤§é—®é¢˜åˆ†è§£ä¸ºå°çš„å­é—®é¢˜æ¥è§£å†³ã€‚å°çš„è§£å†³äº†ï¼Œå¤§çš„é—®é¢˜ä¹Ÿå°±è§£å†³äº†ã€‚

åˆ†æ²»ç®—æ³•ä¸€èˆ¬éƒ½æ˜¯ç”¨é€’å½’æ¥å®ç°çš„ã€‚**åˆ†æ²»æ˜¯ä¸€ç§è§£å†³é—®é¢˜çš„å¤„ç†æ€æƒ³ï¼Œé€’å½’æ˜¯ä¸€ç§ç¼–ç¨‹æŠ€å·§**

- **é€’å½’å®ç°æ‹†åˆ†ç›®æ ‡æ•°ç»„** 

  ```java
  é€’æ¨å…¬å¼ï¼š
  mergr_sort(p...r) = merge(merge_sort(p..q),merge_sort(q_1...r))
  æŒ‰ç…§ç›®æ ‡æ•°ç»„çš„ä¸­é—´èŠ‚ç‚¹å·®åˆ†æ•´ä¸ªæ•°ç»„ï¼Œè¿›è¡Œåˆ†åˆ«æ’åº
  
  ç»ˆæ­¢æ¡ä»¶
  p >= r ä¸ç”¨å†ç»§ç»­åˆ†è§£   å³æ‹†è§£æˆçš„ç›®æ ‡æ•°ç»„åªå‰©ä¸€ä¸ªå…ƒç´ 
  ```

- **åˆå¹¶æ‹†åˆ†å¹¶å®Œæˆæ’åºçš„æ•°ç»„---ç±»ä¼¼åˆå¹¶ä¸¤ä¸ªæœ‰åºæ•°ç»„** (*åˆ©ç”¨å“¨å…µç®€åŒ–ä»£ç )*

  - å¼€è¾Ÿä¸€ä¸ªå’Œåˆå¹¶å®Œæˆåæ•°ç»„ä¸€æ ·å¤§çš„æ•°ç»„ ---ä¸´æ—¶æ•°ç»„
  - æ¯”è¾ƒæœ‰åºæ•°ç»„é¦–å…ƒç´ çš„å¤§å°ï¼Œè°å°å°±æ”¾åˆ°ä¸´æ—¶æ•°ç»„ä¸­ï¼Œä¾æ¬¡æ¯”è¾ƒæ”¾å…¥ï¼Œç›´åˆ°å…¶ä¸­æœ‰ä¸€ä¸ªæ•°ç»„å·²ç»æ²¡æœ‰å…ƒç´ å¯ä»¥æ¯”è¾ƒ
  - ç„¶åå°†æœ‰å…ƒç´ çš„æ•°ç»„ç›´æ¥æ”¾åˆ°åˆ°ä¸´æ—¶æ•°ç»„åé¢
  - æœ€åå°†ä¸´æ˜¯æ•°ç»„ä¸­çš„å…ƒç´ è€ƒå›éœ€è¦åˆå¹¶çš„æ•°ç»„ä¸­

  ```java
      public static void merge(int[] a, int begin1, int end1, int begin2, int end2) {
          int start = 0; //ä¸´æ—¶æ•°ç»„çš„å…¶å®ä½ç½®
          int begin = begin1;  //è®°ä½æ•°ç»„èµ·å§‹ä½ç½®
          int[] temp = new int[end2 - begin1 + 1]; //å¼€è¾Ÿå’Œåˆå¹¶åæ•°ç»„å¤§å°ä¸€æ ·å¤§çš„æ•°ç»„
  
          //ä»¥ä¸‹æ“ä½œç±»ä¼¼åˆå¹¶ä¸¤ä¸ªæœ‰åºæ•°ç»„
          //è°å°å°±å°†è°æ”¾å…¥ä¸´æ—¶æ•°ç»„ä¸­
          while (begin1 <= end1 && begin2 <= end2) {
              if (a[begin1] < a[begin2]) {
                  temp[start++] = a[begin1++];
              } else {
                  temp[start++] = a[begin2++];
              }
          }
          //å°†å‰©ä½™çš„æ•°ç»„ç›´æ¥æ‹·è´å›ä¸´æ—¶æ•°ç»„
          while (begin1 <= end1) {
              temp[start++] = a[begin1++];
          }
          while (begin2 <= end2) {
              temp[start++] = a[begin2++];
          }
          //å°†tempæ•°ç»„ä¸­çš„å…ƒç´ æ‹·è´å›åˆå¹¶åçš„æ•°ç»„ä¸­ã€‚
          for (int i = 0; i < temp.length; i++) {
              a[begin + i] = temp[i];
          }
      }
  
  ```

å½’å¹¶æ’åºçš„æ•´ä½“ä»£ç ï¼š

```java
    public static void merge(int[] a, int begin1, int end1, int begin2, int end2) {
        int start = 0; //ä¸´æ—¶æ•°ç»„çš„å…¶å®ä½ç½®
        int begin = begin1;  //è®°ä½æ•°ç»„èµ·å§‹ä½ç½®
        int[] temp = new int[end2 - begin1 + 1]; //å¼€è¾Ÿå’Œåˆå¹¶åæ•°ç»„å¤§å°ä¸€æ ·å¤§çš„æ•°ç»„

        //ä»¥ä¸‹æ“ä½œç±»ä¼¼åˆå¹¶ä¸¤ä¸ªæœ‰åºæ•°ç»„
        //è°å°å°±å°†è°æ”¾å…¥ä¸´æ—¶æ•°ç»„ä¸­
        while (begin1 <= end1 && begin2 <= end2) {
            if (a[begin1] < a[begin2]) {
                temp[start++] = a[begin1++];
            } else {
                temp[start++] = a[begin2++];
            }
        }
        //å°†å‰©ä½™çš„æ•°ç»„ç›´æ¥æ‹·è´å›ä¸´æ—¶æ•°ç»„
        while (begin1 <= end1) {
            temp[start++] = a[begin1++];
        }
        while (begin2 <= end2) {
            temp[start++] = a[begin2++];
        }
        //å°†tempæ•°ç»„ä¸­çš„å…ƒç´ æ‹·è´å›åˆå¹¶åçš„æ•°ç»„ä¸­ã€‚
        for (int i = 0; i < temp.length; i++) {
            a[begin + i] = temp[i];
        }
    }

```



### å½’å¹¶æ’åºæ€§èƒ½åˆ†æï¼š



#### å½’å¹¶æ’åºæ˜¯ä¸€ä¸ªç¨³å®šæ’åº

å½’å¹¶æ’åºæ˜¯ä¸€ä¸ªç¨³å®šæ’åºï¼Œ**ç¨³å®šä¸å¦å…³é”®æ˜¯åœ¨çœ‹merge()å‡½æ•°**ï¼Œä¹Ÿå°±æ˜¯æœ‰ä¸¤ä¸ªæœ‰åºå­æ•°ç»„åˆå¹¶æˆä¸€ä¸ªæœ‰åºæ•°ç»„é‚£éƒ¨åˆ† ã€‚åˆå¹¶è¿‡ç¨‹ä¸­ï¼Œ*æŠŠå·®åˆ†åè¦åˆå¹¶çš„ä¸¤ä¸ªæ•°ç»„ä¸­å€¼ç›¸ç­‰çš„å…ƒç´ ï¼Œå…ˆå°†æ‹†åˆ†å‰ä¸‹æ ‡é å‰çš„å…ƒç´ å…ˆæ”¾å…¥åˆå¹¶ç”¨çš„tempæ•°ç»„å†…å³å¯*ã€‚è¿™æ ·å°±ä¿è¯äº†å€¼ç›¸åŒçš„å…ƒç´ ã€‚åœ¨åˆå¹¶å‰åçš„å…ˆåé¡ºåºä¸å˜ï¼Œæ‰€ä»¥ï¼Œ**å½’å¹¶æ’åºæ˜¯ä¸€ä¸ªç¨³å®šçš„æ’åºç®—æ³•**ã€‚                    



#### å½’å¹¶æ’åºçš„æ—¶é—´å¤æ‚åº¦

æˆ‘ä»¬å¯ä»¥ä»åˆ†æ²»æ€æƒ³ä¸­çš„åˆ°å¯å‘ï¼Œæ±‚è§£å¤§é—®é¢˜ï¼Œè§£å†³å­é—®é¢˜å³å¯ã€‚åˆ™æˆ‘ä»¬å®šä¹‰æ±‚è§£é—®é¢˜æ—¶é—´æ˜¯T(a),æ±‚è§£é—®é¢˜bã€cçš„æ—¶é—´åˆ†åˆ«æ˜¯T(b)å’ŒT(c)ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±å¯ä»¥å¾—åˆ°å¦‚ä¸‹çš„é€’æ¨å…³ç³»

```java
T(a) = T(b)+T(c)+k
```

å…¶ä¸­Kç­‰äºå°†ä¸¤ä¸ªå­é—®é¢˜b,cçš„ç»“æœåˆå¹¶æˆé—®é¢˜açš„è§£æœæ‰€æ¶ˆè€—çš„æ—¶é—´ã€‚

**ä¸ä»…é€’å½’æ±‚è§£é—®é¢˜å¯ä»¥å†™æˆé€’æ¨å…¬å¼ï¼Œé€’å½’ä»£ç çš„æ—¶é—´å¤æ‚åº¦ä¹Ÿå¯ä»¥å†™æˆé€’æ¨å…¬å¼ã€‚** 

ç°åœ¨æˆ‘ä»¬æ¥æ±‚è§£å½’å¹¶æ’åºçš„æ—¶é—´å¤æ‚åº¦

```java
//åˆå¹¶ä¸¤ä¸ªæœ‰åºå­æ•°ç»„çš„æ—¶é—´å¤æ‚åº¦æ˜¯O(n)ã€‚æ‰€ä»¥ï¼Œå¥—ç”¨å‰é¢çš„å…¬å¼ï¼Œå½’å¹¶æ’åºçš„æ—¶é—´å¤æ‚åº¦çš„è®¡ç®—å…¬å¼å°±æ˜¯ï¼š
T(1) = c ;n=1æ—¶ï¼Œå³æ•°ç»„åªå‰©ä¸‹ä¸€ä¸ªå…ƒç´ ï¼Œåªéœ€è¦å¸¸é‡çº§çš„æ‰§è¡Œæ—¶é—´ï¼Œæ‰€ä»¥è¡¨ç¤ºä¸ºcã€‚
T(n) = 2*T(n/2) + n;  n>1

```

åˆ†è§£è®¡ç®—è¿‡ç¨‹ï¼š

```java
T(n) = 2*T(n/2) + n
	 = 2*(2*T(n/4)+n/2) +n        = 4*T(n/4) + 2*n
     = 4*(2*T(n/8) + n/4) + 2*n   = 8*T(n/8) + 3*n
     = 8*(2*T(n/16) + n/8) + 3*n  = 16*T(n/16) + 4*n
     ......
     = 2^k * T(n/2^k) + k * n
     ......

```

æˆ‘ä»¬å¯ä»¥å¾—å‡ºT(n) = 2^kT(n/2^k)+kn,å½“ T(n/2^k)=T(1) æ—¶ï¼Œä¹Ÿå°±æ˜¯ n/2^k=1ï¼Œæˆ‘ä»¬å¾—åˆ° k=log2n ã€‚æˆ‘ä»¬å°† k å€¼ä»£å…¥ä¸Šé¢çš„å…¬å¼ï¼Œå¾—åˆ° T(n)=Cn+nlog2n ã€‚å¦‚æœæˆ‘ä»¬ç”¨å¤§ O æ ‡è®°æ³•æ¥è¡¨ç¤ºçš„è¯ï¼ŒT(n) å°±ç­‰äº O(nlogn)ã€‚æ‰€ä»¥å½’å¹¶å¹¶æ’åºçš„æ—¶é—´å¤æ‚åº¦æ˜¯ O(nlogn)ã€‚

å½’å¹¶æ’åºçš„æ‰§è¡Œæ•ˆç‡ä¸è¦æ’åºçš„åŸå§‹æ•°ç»„çš„æœ‰åºç¨‹åº¦æ— å…³ï¼Œæ‰€ä»¥å…¶æ—¶é—´å¤æ‚åº¦æ˜¯éå¸¸ç¨³å®šçš„ã€‚

| æ—¶é—´å¤æ‚åº¦     | å¤§Oæ ‡è®°æ³• |
| -------------- | --------- |
| æœ€å¥½æ—¶é—´å¤æ‚åº¦ | O(nlogn)  |
| å¹³å‡æ—¶é—´å¤æ‚åº¦ | O(nlogn)  |
| æœ€åæ—¶é—´å¤æ‚åº¦ | O(nlogn)  |



#### å½’å¹¶æ’åºçš„ç©ºé—´å¤æ‚åº¦

**å½’å¹¶æ’åºæ˜¯ä¸€ä¸ªéåŸåœ°æ’åºï¼**è¿™æ˜¯å› ä¸ºå½’å¹¶æ’åºçš„åˆå¹¶å‡½æ•°ã€‚åœ¨åˆå¹¶ä¸¤ä¸ªæœ‰åºæ•°ç»„ä¸ºä¸€ä¸ªæœ‰åºæ•°ç»„æ—¶ï¼Œéœ€è¦å€ŸåŠ©é¢å¤–çš„å‚¨å­˜ç©ºé—´ã€‚**Oï¼ˆnï¼‰**

é€’å½’ä»£ç çš„ç©ºé—´å¤æ‚ä¸èƒ½åƒæ—¶é—´å¤æ‚åº¦é‚£æ ·ç´¯åŠ ã€‚å°½ç®¡æ¯æ¬¡åˆå¹¶æ“ä½œéƒ½éœ€è¦ç”³è¯·é¢å¤–çš„å†…å­˜ç©ºé—´ï¼Œä½†æ˜¯åœ¨åˆå¹¶å®Œæˆåï¼Œä¸´æ—¶å¼€è¾Ÿçš„å†…å­˜ç©ºé—´è¢«é‡Šæ”¾æ‰äº†ï¼Œ**åœ¨ä»»æ„æ—¶åˆ»ï¼ŒCPUåªä¼šæœ‰ä¸€ä¸ªå‡½æ•°åœ¨æ‰§è¡Œï¼Œä¹Ÿå°±åªä¼šæœ‰ä¸€ä¸ªä¸´æ—¶çš„å†…å­˜ç©ºé—´åœ¨ä½¿ç”¨ã€‚ä¸´æ—¶å†…å­˜ç©ºé—´æœ€å¤§ä¹Ÿä¸ä¼šè¶…è¿‡nä¸ªæ•°æ®çš„å¤§å°ï¼Œæ‰€ä»¥ç©ºé—´å¤æ‚åº¦æ˜¯O(n).**



## å¿«é€Ÿæ’åº(QuickSort):arrow_heading_up:

å¿«æ’æ ¸å¿ƒæ€æƒ³ï¼š

- å…ˆä»åŒºé—´æ•°ç»„ä¸­é€‰æ‹©ä¸€ä¸ªæ•°æ®ä½œä¸ºåˆ†åŒºç‚¹
- éå†åŒºé—´æ•°ç»„ä¸­çš„å…ƒç´ ï¼Œå°†å°äºåˆ†åŒºç‚¹çš„å…ƒç´ æ”¾åœ¨åˆ†åŒºç‚¹å·¦è¾¹ï¼Œå¤§äºåˆ†åŒºç‚¹çš„å…ƒç´ æ”¾åœ¨åˆ†åŒºç‚¹å³è¾¹ã€‚ç»è¿‡è¿™ä¸€ä¸ªæ­¥éª¤åï¼Œæ•°ç»„å°±è¢«å‘åˆ†ä¸ºäº†3éƒ¨åˆ†ï¼Œå·¦è¾¹ p åˆ° q-1 ä¹‹é—´éƒ½æ˜¯å°äº pivotçš„ ï¼Œä¸­é—´ pivotï¼Œåé¢q+1åˆ°rä¹‹é—´æ˜¯å¤§äº pivot çš„ï¼ˆæ’åºå¹¶åˆ†åŒºï¼‰
- æ ¹æ®åˆ†æ²»ï¼Œé€’å½’çš„å¤„ç†æ€æƒ³ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨é€’å½’æ’åºä¸‹æ ‡ä»påˆ°q-1ä¹‹é—´çš„æ•°æ®å’Œå°æ ‡ä»q+1åˆ°rä¹‹é—´çš„æ•°æ®ï¼Œç›´åˆ°åŒºé—´ç¼©å°ä¸º1ï¼Œå°±è¯´æ˜æ‰€æœ‰çš„æ•°æ®éƒ½æœ‰åºäº†ã€‚

![å¿«æ’åˆ†åŒº](D:\å©•\æ•°æ®ç»“æ„ä¸ç®—æ³•ä¹‹ç¾\picture\å¿«æ’åˆ†åŒº.png)



é€’å½’è¿‡ç¨‹ï¼š

```java
é€’æ¨å…¬å¼ï¼š
quick_sort(pâ€¦r) = quick_sort(pâ€¦q-1) + quick_sort(q+1, r)

ç»ˆæ­¢æ¡ä»¶ï¼š
p >= r
```

é€’å½’å…¬å¼->é€’å½’ä»£ç 

```java
    //å¿«æ’é€’å½’å‡½æ•°ï¼Œbegin,endä¸ºä¸‹æ ‡ divä¸ºåˆ†åŒºèŠ‚ç‚¹ï¼Œä¸‹ä¸€æ¬¡åˆ†åŒºå°±ä¸åŒ…å«æ­¤åˆ†åŒºèŠ‚ç‚¹
    private static void quickSortInternally(int[] a, int begin, int end) {
        if (begin >= end) {
            return;
        }
        int div = partition(a, begin, end);
        quickSortInternally(a, begin, div - 1);
        quickSortInternally(a, div + 1, end);

    }
```

å½’å¹¶æ’åºä¸­æœ‰ä¸€ä¸ªmerge()åˆå¹¶æ–¹æ³•ï¼Œæˆ‘ä»¬è¿™é‡Œæœ‰ä¸€ä¸ªpartition()åˆ†åŒºå‡½æ•°ã€‚å¯¹æ•°ç»„è¿›è¡Œé¡ºåºè°ƒæ•´ä¸”å¯¹æ•°ç»„è¿›è¡Œè¿›ä¸€æ­¥åˆ†åŒºå¤„ç†,ä»£ç å¦‚ä¸‹ï¼š

```java
    private static int partition(int[] a, int begin, int end) {
        int pivot = a[end];
        int i = begin;      //iå½“ä½œâ€œå·²æ’å¥½åºèŠ‚ç‚¹â€
        for (int j = begin; j < end; j++) {
            if (a[j] < pivot) { //æ¯”åˆ†åŒºèŠ‚ç‚¹å°çš„å…ƒç´ 
                if (i == j) {   //æœ‰åºæ€§åŒºæ— å…ƒç´ ï¼Œæˆ–è€…å·²ç»æœ‰åº
                    ++i;
                } else {
                    swap(a, i, j); //å°†æ— åºåŒºçš„å…ƒç´ äº¤æ¢åˆ°æœ‰åºåŒºåé¢ï¼Œæœ‰åºåŒº+1ï¼Œæ— åºåŒº-1
                    i++;
                }
            }
        }
        swap(a, i, end);

        return i;
    }
```

è¿™é‡Œçš„å¤„ç†æœ‰ç‚¹ç±»ä¼¼é€‰æ‹©æ’åºã€‚[p-r-1]æˆ‘ä»¬é€šè¿‡ä¸‹æ ‡ iæŠŠåŒºé—´åˆ†ä¸ºä¸¤ä¸ªéƒ¨åˆ†ï¼Œ[p-i]éƒ½å°äºpivot æˆ‘ä»¬å°†å®ƒå–åä¸º"å·²å¤„ç†åŒºé—´"ã€‚[i~r-1]éƒ½æ˜¯â€æœªå¤„ç†åŒºé—´â€œã€‚æˆ‘ä»¬æ¯æ¬¡éƒ½ä»æœªå¤„ç†åŒºé—´ä¸­å–å‡ºä¸€ä¸ªå…ƒç´ A[j]ï¼Œä¸pivotæ¯”è¾ƒï¼Œå¦‚æœå°äºpivotï¼Œåˆ™å°†åŠ å…¥åˆ°å·²å¤„ç†åŒºé—´çš„å°¾éƒ¨ï¼Œä¹Ÿå°±æ˜¯A[i]ä½ç½®ï¼Œj++,i++ã€‚åä¹‹åˆ™åªæœ‰j++ã€‚



![å¿«æ’åˆ†åŒºæ’åºåŸç†å›¾](D:\å©•\æ•°æ®ç»“æ„ä¸ç®—æ³•ä¹‹ç¾\picture\å¿«æ’åˆ†åŒºæ’åºåŸç†å›¾.png)



å› ä¸ºåˆ†åŒºè¿‡ç¨‹æ¶‰åŠäº¤æ¢æ“ä½œï¼Œäº¤æ¢è¿‡ç¨‹ä¸­åªå¯¹æ¯”å¤§å°ï¼Œæ— æ³•ä¿è¯ç›¸åŒå…ƒç´ çš„å…ˆåé¡ºåºã€‚æ‰€ä»¥å¿«é€ŸğŸ¥§æ’åºæ˜¯ä¸€ä¸ªä¸ç¨³å®šç®—æ³•ã€‚

### å¿«æ’æ€§èƒ½åˆ†æ



#### å¿«æ’ç¨³å®šæ€§

å¿«æ‹æ˜¯ä¸€ä¸ªä¸ç¨³å®šç®—æ³•



#### å¿«æ’çš„ç©ºé—´å¤æ‚åº¦

å¿«æ’æ˜¯ä¸€ä¸ªåŸåœ°æ’åºï¼Œåœ¨åŸæ•°ç»„å†…è¿›è¡Œç®€å•äº¤æ¢ã€‚



#### å¿«æ’æ—¶é—´å¤æ‚åº¦

å¿«æ’ä¹Ÿæ˜¯ä½¿ç”¨é€’å½’å®ç°çš„åˆ†æ²»æ€æƒ³ï¼Œå¯¹äºé€’å½’ä»£ç çš„æ—¶é—´å¤æ‚åº¦ï¼Œæˆ‘ä»¬ä¹‹å‰æ€»ç»“çš„å…¬å¼åœ¨è¿™é‡Œä¾æ—§é€‚ç”¨ã€‚

```java
T(1) = Cï¼›   n=1 æ—¶ï¼Œåªéœ€è¦å¸¸é‡çº§çš„æ‰§è¡Œæ—¶é—´ï¼Œæ‰€ä»¥è¡¨ç¤ºä¸º Cã€‚
T(n) = 2*T(n/2) + nï¼› n>1
```

ä½†æ˜¯å½’å¹¶æ’åºæ˜¯ä»ä¸­é—´å¼€å§‹åˆ’åˆ†åŒºé—´ï¼Œè€Œå¿«æ’åˆ’åˆ†åŒºé—´çš„æ˜¯åˆ©ç”¨é€‰å–ä¸€ä¸ªå€¼ï¼Œå‡å¦‚é€‰å–çš„å€¼æ˜¯ç›®æ ‡æ•°ç»„ä¸­æœ€å¤§å…ƒç´ ï¼Œæˆ–è€…æœ€å°å…ƒç´ ã€‚åˆ™ä¼šå¯¼è‡´æ¯æ¬¡åˆ’åˆ†çš„åŒºé—´è¨€ä¸¥é‡ä¸å‡ç­‰ã€‚å‡å¦‚æ¯æ¬¡åˆ’åˆ†åŒºé—´éƒ½å–åˆ°äº†è¿™ç§æç«¯å€¼ï¼Œåˆ™æˆ‘ä»¬è¦è¿›è¡Œå¤§çº¦næ¬¡åˆ†åŒºæ“ä½œï¼Œæ‰èƒ½å®Œæˆå¿«æ’çš„æ•´ä¸ªè¿‡ç¨‹ã€‚æ¯æ¬¡åˆ†åŒºæˆ‘ä»¬å¹³å‡è¦æ‰«æå¤§çº¦n/2ä¸ªå…ƒç´ ã€‚è¿™ç§æƒ…å†µä¸‹ï¼Œå¿«æ’çš„æ—¶é—´å¤æ‚åº¦å°±ä»O(nlogn)é€€åŒ–æˆäº†O(n^2)ã€‚

åˆ©ç”¨é€’å½’æ ‘å¯¹å¿«æ’çš„æ—¶é—´å¤æ‚åº¦è¿›è¡Œåˆ†æ



åœ¨å¤§éƒ¨åˆ†æƒ…å†µä¸‹æ—¶é—´å¤æ‚åº¦éƒ½æ˜¯O(nlogn)ï¼Œåªæœ‰åœ¨æç«¯æƒ…å†µä¸‹ï¼Œæ‰ä¼šé€€åŒ–åˆ° O(n2)ã€‚

| æ—¶é—´å¤æ‚åº¦             | å¯¹åº”çš„åŸå§‹æ•°ç»„                          |
| ---------------------- | --------------------------------------- |
| æœ€å¥½æ—¶é—´å¤æ‚åº¦O(nlogn) | æ¯æ¬¡æŒ‘é€‰çš„åˆ†åŒºå€¼éƒ½æ˜¯å¤§å°æœ€ä¸­é—´çš„é‚£ä¸ªå€¼  |
| å¹³å‡æ—¶é—´å¤æ‚åº¦O(nlogn) |                                         |
| æœ€åæ—¶é—´å¤æ‚åº¦O(n^2)   | æ¯æ¬¡æŒ‘é€‰çš„åˆ†åŒºå€¼éƒ½æ˜¯æç«¯å€¼-æœ€å¤§æˆ–æœ€å°å€¼ |

åˆç†é€‰æ‹©åŒºé—´å€¼å¯ä»¥é¿å…å‡ºç°æœ€åæƒ…å†µã€‚

# è§£ç­”å¼€å§‹é—®é¢˜:key:

å¿«æ’çš„æ ¸å¿ƒæ€æƒ³å°±æ˜¯**åˆ†æ²»**å’Œ**åˆ†åŒº**.æˆ‘ä»¬å¯ä»¥åˆ©ç”¨åˆ†åŒºçš„æ€æƒ³ï¼›æ¥è§£ç­”å¼€å§‹çš„é—®é¢˜ï¼šO(n)æ—¶é—´å¤æ‚åº¦å†…æ¥æ±‚æ— åºæ•°ç»„ä¸­çš„ç¬¬Kå¤§å…ƒç´ ã€‚æ¯”å¦‚ï¼Œ4,2,5,12,3è¿™æ ·ä¸€ç»„æ•°æ®ï¼Œç¬¬3å¤§å…ƒç´ å°±æ˜¯4ã€‚

æˆ‘ä»¬åŒºé—´é€‰æ‹©å®Œåå°±åˆ†ä¸º3éƒ¨åˆ†ã€‚

å¦‚æœp+1=kï¼Œé‚£ä¹ˆA[p]å°±æ˜¯è¦æ±‚è§£çš„å…ƒç´ ï¼Œå¦‚æœk>p+1,è¯´æ˜ç¬¬Kå¤§å…ƒç´ å‡ºç°A[p+1...n-1]åŒºé—´ï¼Œæˆ‘ä»¬å†æŒ‰ç…§é€’å½’æ€è·¯åœ¨A[p+1...n-1]è¿™ä¸ªåŒºé—´å†…è¿›è¡ŒæŸ¥æ‰¾ã€‚åŒç†ï¼Œå¦‚æœk<p+1,é‚£æˆ‘ä»¬å°±åœ¨A[0...p-1]åŒºé—´æŸ¥æ‰¾ã€‚

![O(n)æ±‚è§£ç¬¬Kå¤§å…ƒç´ ](D:\å©•\æ•°æ®ç»“æ„ä¸ç®—æ³•ä¹‹ç¾\picture\O(n)æ±‚è§£ç¬¬Kå¤§å…ƒç´ .png)



## æ—¶é—´å¤æ‚åº¦åˆ†æ

ç¬¬ä¸€æ¬¡åˆ†åŒºæŸ¥æ‰¾ï¼Œæˆ‘ä»¬éœ€è¦å¯¹å¤§å°ä¸ºnçš„æ•°ç»„æ‰§è¡Œåˆ†åŒºæ“ä½œï¼Œéœ€è¦éå†nä¸ªå…ƒç´ ã€‚ç¬¬äºŒæ¬¡åˆ†åŒºæŸ¥æ‰¾ï¼Œæˆ‘ä»¬åªéœ€è¦å¯¹n/2çš„æ•°ç»„æ‰§è¡Œåˆ†åŒºæ“ä½œï¼Œéœ€è¦éå†n/2ä¸ªå…ƒç´ ã€‚ä¾æ¬¡ç±»æ¨ï¼Œåˆ†åŒºéå†å…ƒç´ çš„ä¸ªæ•°ä¸ºï¼Œn/2,n/4,n/8,n/16......ç›´åˆ°åŒºé—´ç¼©å°ä¸º1ã€‚

å¦‚æœæˆ‘ä»¬æŠŠæ¯æ¬¡åˆ†åŒºéå†çš„å…ƒç´ ä¸ªæ•°åŠ èµ·æ¥ï¼Œå°±æ˜¯ï¼šn+n/2+n/4+n/8+...+1ã€‚è¿™æ˜¯ä¸€ä¸ªç­‰æ¯”æ•°åˆ—æ±‚å’Œï¼Œæœ€åçš„å’Œç­‰äº2n-1ã€‚æ‰€ä»¥ï¼Œä¸Šè¿°çš„è§£é¢˜æ€è·¯çš„æ—¶é—´å¤æ‚åº¦å°±æ˜¯O(n)ã€‚



# æ€è€ƒï¼š:thinking:

ç°åœ¨ä½ æœ‰ 10 ä¸ªæ¥å£è®¿é—®æ—¥å¿—æ–‡ä»¶ï¼Œæ¯ä¸ªæ—¥å¿—æ–‡ä»¶å¤§å°çº¦300MBï¼Œæ¯ä¸ªæ–‡ä»¶é‡Œçš„æ—¥å¿—éƒ½æ˜¯æŒ‰ç…§æ—¶é—´æˆ³ä»å°åˆ°å¤§æ’åºçš„ã€‚ä½ å¸Œæœ›å°†è¿™ 10 ä¸ªè¾ƒå°çš„æ—¥å¿—æ–‡ä»¶ï¼Œåˆå¹¶ä¸º 1 ä¸ªæ—¥å¿—æ–‡ä»¶ï¼Œåˆå¹¶ä¹‹åçš„æ—¥å¿—ä»ç„¶æŒ‰ç…§æ—¶é—´æˆ³ä»å°åˆ°å¤§æ’åˆ—ã€‚å¦‚æœå¤„ç†ä¸Šè¿°æ’åºä»»åŠ¡çš„æœºå™¨å†…å­˜åªæœ‰ 1GBï¼Œä½ æœ‰ä»€ä¹ˆå¥½çš„è§£å†³æ€è·¯ï¼Œèƒ½â€œå¿«é€Ÿâ€åœ°å°†è¿™ 10 ä¸ªæ—¥å¿—æ–‡ä»¶åˆå¹¶å—ï¼Ÿ



## å¿«æ’çš„ä¼˜åŒ–

- åˆ†ç»„ä¸å¹³è¡¡--å¯¼è‡´å¿«æ’é€’å½’æ·±åº¦å¢åŠ 

  - æ’åºæ¥è¿‘æœ‰åºï¼ˆåŸºå‡†å€¼åˆ’åˆ†çš„ä¸¤ä¸ªå­æ•°ç»„ä¸¥é‡ä¸å‡è¡¡ï¼Œæ­¤åˆ†å±‚ä¸‹æ¥çš„ç»“æœè¿‘ä¹äºnå±‚ï¼Œæ­¤æ—¶å¿«æ’é€€åŒ–ä¸ºå¤æ‚åº¦ä¸ºO(n^2ï¼‰æ’åºç®—æ³•

    > è§£å†³ï¼šéšæœºæ•°/ä¸‰æ•°å–ä¸­æ³•ï¼Œè®©è¿™ç§å‡ºç°æç«¯å€¼æƒ…å†µé™ä½

  - å½“å¾…æ’åºé›†åˆåŒ…å«å¤§é‡çš„é‡å¤å…ƒç´ ï¼Œç”±äºä¸åŸºå‡†å€¼ç›¸ç­‰çš„å…ƒç´ ä¸ªæ•°è¿‡å¤šï¼Œå¯¼è‡´æ•°ç»„é•¿åº¦ä¸å‡è¡¡ï¼Œæ­¤æ—¶åˆ†å±‚ä¸‹æ¥çš„ç»“æœå‡ ä¹nå±‚ï¼Œå¿«æ’é€€åŒ–ä¸ºO(n^2)ã€‚  

    > è§£å†³ï¼šäºŒè·¯å¿«æ’    åŸºå‡†å€¼-v    å°†å¾…æ’åºæ•°ç»„åˆ†ä¸º2éƒ¨åˆ†  å¤§äºæˆ–æˆ–è€…å°äº
    >
    > â€‹	å°†å¤§äºå’Œå°äºvçš„å…ƒç´ æ”¾åœ¨æ•°ç»„çš„ä¸¤ç«¯,iç´¢å¼•ä¸æ–­å‘åæ‰«æï¼Œå½“içš„å…ƒç´ å°äºvæ—¶ï¼Œi++;jç´¢å¼•ä¸æ–­å‘å‰æ‰«æï¼Œå½“jçš„å…ƒç´ å¤§äºvæ—¶ï¼Œj--;å½“iç¢°åˆ°ä¸€ä¸ª>=vçš„å…ƒç´ æ—¶ä»¥åŠå½“jç¢°åˆ°ä¸€ä¸ª<=vçš„å…ƒç´ æ—¶ï¼Œäº¤æ¢iå’Œjçš„å…ƒç´ ï¼Œi++,jâ€” ã€‚  
    >
    > å³ä¿è¯ç­‰äºåŸºå‡†å€¼çš„é‡å¤å…ƒç´ è¢«å‡åˆ†åˆ°ä¸¤è¾¹ ä¸€å®šç¨‹åº¦ä¸Šä½¿å¾—åˆ†ç»„å¹³å‡ï¼Œé€’å½’æ·±åº¦é™ä½

  

  

  â€‹	äºŒè·¯å¿«æ’å›¾è§£

  ![1552803918895](C:\Users\32183\AppData\Roaming\Typora\typora-user-images\1552803918895.png)

  â€‹	ä¿è¯ç­‰äºåŸºå‡†å€¼çš„é‡å¤å…ƒç´ è¢«å‡åˆ†åˆ°ä¸¤è¾¹ ä¸€å®šç¨‹åº¦ä¸Šä½¿å¾—åˆ†ç»„å¹³å‡ï¼Œé€’å½’æ·±åº¦é™ä½

  ![1552811349512](C:\Users\32183\AppData\Roaming\Typora\typora-user-images\1552811349512.png)

  

  ```java
      /**
       * è§£å†³ï¼šæ•°æ®é‡å¤çš„å¿«æ’---äºŒè·¯å½’å¹¶å¿«æ’
       *
       * @param a     æ•°ç»„a
       * @param left  å·¦ä¸‹æ ‡
       * @param right å³ä¸‹æ ‡
       * @return åŸºå‡†å€¼
       */
      private static int partition2(int[] a, int left, int right) {
          int randomIndex = (int) ((Math.random() * (right - left + 1)) + left);
          swap(a, right, randomIndex);
          //åŸºå‡†å€¼
          int v = a[right];
          //a[left,i-1]   < v
          int i = left;
          //a[j+1,right] >v
          int j = right - 1;
          while (true) {
              //åŒæŒ‡é’ˆå‰æŒ‡é’ˆå‘åæ‰«æ
              while (i <= right && a[i] < v) {
                  i++;
              }
              while (j >= left && a[j] > v) {
                  j--;
              }
              if (i > j) {
                  break;
              }
              swap(a, i, j);
              i++;
              j--;
          }
          swap(a, i, right);
          return i;
      }
  ```

  

  - **äºŒè·¯å¿«æ’ä¼˜åŒ–- - - - -ä¸‰è·¯å¿«æ’  <  =  >**

  - **ä¸‰è·¯å¿«æ’å›¾è§£**

    ![1552804075550](C:\Users\32183\AppData\Roaming\Typora\typora-user-images\1552804075550.png)

    å°†å¤§é‡ç­‰äºåŸºå‡†å€¼çš„éƒ¨åˆ†å–å‡ºæ¥ï¼Œæ”¾åˆ°æ’åºæ•°ç»„çš„ä¸­é—´ï¼Œä¸‹ä¸€æ¬¡è¿›è¡Œæ’åºæ—¶åªéœ€è¦æ’åºä¸ç­‰äºåŸºå‡†å€¼çš„åŒºåŸŸå³å¯

    å¤§å¤§å‡å°‘æ’åºæ¬¡æ•°ï¼Œå‡å°‘æ ‘çš„æ·±åº¦ï¼Œåˆä¿æŒäº†æ•°ç»„çš„å¹³è¡¡ã€‚

    **ä»£ç å®ç°ï¼š**

    > ```java
    > //*********************å¿«æ’ä¼˜åŒ–ä¹‹ä¸­çº§é‡å¤æ•°æ®ä¼˜åŒ–--ä¸‰è·¯å¿«æ’
    > public static void quickSortOP3(int[] a, int begin, int end) {
    >     quickSortInternallyOP3(a, begin, end);
    > }
    > 
    > private static void quickSortInternallyOP3(int[] a, int begin, int end) {
    >     if (end - begin < 15) {   //å°‘é‡æ•°æ®ä½¿ç”¨æ’æ’
    >         insertSort(a, begin, end);
    >         return;
    >     }
    >     int[] divs = partition3(a, begin, end);
    >     int div1 = divs[0];
    >     int div2 = divs[1];
    >     quickSortInternallyOP3(a, begin, div1 - 1);
    >     quickSortInternallyOP3(a, div2 + 1, end);
    > }
    > 
    > private static int[] partition3(int[] a, int left, int right) {
    >     int randomIndex = (int) (Math.random() * (right - left + 1) + left);
    >     swap(a, randomIndex, left);
    >     int v = a[left];
    >     int[] divs = new int[2];
    >     //a[left+1....lt] < v
    >     int i = left + 1;
    >     int lt = left;
    >     //a[gt...right]  < v
    >     int gt = right + 1;   // < vçš„åŒºé—´
    >     while (i < gt) {
    >         if (a[i] < v) {
    >             swap(a, lt + 1, i);
    >             lt++;
    >             i++;
    >         } else if (a[i] > v) {
    >             swap(a, gt - 1, i);
    >             gt--;
    >         } else {
    >             i++;
    >         }
    >     }
    >     swap(a, left, lt);
    >     divs[0] = lt;
    >     divs[1] = gt;
    >     return divs;
    > }
    > ```

- å½±å“å¿«æ’çš„æ€§èƒ½çš„å¦ä¸€ä¸ªåŸå› æ˜¯å¿«æ’çš„é€’å½’æ·±åº¦ï¼Œå½“å…ƒç´ é€’å½’åŒºé—´å†…çš„å…ƒç´ æ•°ç›®ä¸å¤§æ—¶ï¼Œåˆ©ç”¨å¿«æ’æ’åºåˆ™ä¼šå¢åŠ é€’å½’æ·±åº¦ï¼Œå¢åŠ æ’åºçš„æ—¶é—´å¤æ‚åº¦ï¼Œä½•ä¸é€‰ç”¨ä¸€ç§å¤„ç†å°‘é‡æ•°æ®æ¯”è¾ƒå¿«é€Ÿçš„æ’åºç®—æ³•â€“â€“â€“-æ’æ’

  > å½“é€’å½’åŒºé—´æ¯”è¾ƒå°æ—¶ï¼Œç›´æ¥å¼•å…¥æ’æ’è¿›è¡Œæ’åºï¼Œå‡å°‘é€’å½’æ·±åº¦



â€‹	**å¿«æ’ä¼˜åŒ–æ’æ’**

```java
    private static void insertSort(int[] a, int begin, int end) {
        if (begin >= end) {
            return;
        }
        if ((end - begin + 1) <= 1) {
            return;
        }
        for (int i = begin; i <= end; i++) {
            int value = a[i];  //è¦æ’å…¥é€‚å½“ä½ç½®çš„å€¼
            int j = i - 1; //æœ‰åºåŒº
            for (; j >= 0; j--) {
                if (a[j] > value) {
                    a[j + 1] = a[j];
                } else {
                    break;
                }
            }
            a[j + 1] = value;
        }
    }
```

