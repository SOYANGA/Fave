# 买卖股票系列



## 动态规划解法

- dp状态： max profit mp\[i][j] ：第i天的最大利润

- i:表示第几天
- j:表示是否已经拥有股票 

-  0：无股票 所以就无法卖出 只有两种操作：**不动，买入**

```java
mp[i][0]  = max( max[i-1][0], max[i-1][1] + a[i])
```

- 1：有股票 所以无法在买入 ，只有两种操作 **不动，卖出。**

```java
m[i][1]  = max( maxi-1][1], max[i-1][0] - a[i])
```

以上的只能解决买卖1次或者无数次的问题



- 买卖n次的问题需要给mp状态上再添加一个维度k  mp\[i]\[j][k]

- 表示当天之前已经交易的次数 交易包含：买入和卖出



for i (0-n-1)

for k (0-k)

j  = 0/1

mp\[i]\[k][j]

则递推方程变为：

```
mp[i][k][0] : = max( max[i-1][k][0], max[i-1][k][1] + a[i])
```



```
m[i][k][1]  = max( max[i-1][k][1], max[i-1][k-1][0] - a[i])
```



最大值收益最大值 mp\[n-1][{0,k}]\[0]



cool dowm 309 是需要交易后隔一天才能交易 则就是将k 变为0或者是1  表示当天是否交易过

1交易过 0没有交易过



时间复杂度（n*k） n天k交易   空间时间度（nkx）

## 进阶版

假如股票可以累加的化则j变为 0~x股 

for i (0-n-1)

for k (0-k)

for j (0~x)



需要判断j的大小，不能为0。

```
mp[i][k][j] : = max( mp[i-1][k][j], mp[i-1][k][j+1] + a[i],mp[i-1][k][j-1]-a[i])
```



```
m[i][k][j]  = max( mp[i-1][k][j], mp[i-1][k-1][j-1] - a[i],mp[i-1][k-1][j+1] + a[i])
```

